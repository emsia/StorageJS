var storage={engine:"widget",get:function(_1){return widget.preferenceForKey(_1);},set:function(_2,_3){this.ensureKeyInMap(_2);widget.setPreferenceForKey(_3,_2);},remove:function(_4){this.removeKeyFromMap(_4);widget.setPreferenceForKey(null,_4);},ensureKeyInMap:function(){},removeKeyFromMap:function(){}};storage.keys=[];storage.ensureKeyInMap=function(_5){if(!this.hasKeyInMap(_5)){this.keys.push(_5);this.saveKeyMap();}};storage.hasKeyInMap=function(_6){for(var i=0,m=this.keys.length;i<m;i++){if(_6===this.keys[i]){return true;}}return false;};storage.removeKeyFromMap=function(_7){var _8=[];for(var i=0,m=this.keys.length;i<m;i++){if(_7!==this.keys[i]){_8.push(_7);}}this.keys=_8;this.saveKeyMap();};storage.stringifyArray=function(_9){if(typeof JSON!="undefined"&&JSON.stringify){return JSON.stringify(_9);}var _a="";for(var i=0,m=_9.length;i<m;i++){_a+=item+":sjs-k:";}_a=_a.substring(0,_a.length-8);return _a;};storage.parseString=function(_b){if(typeof JSON!="undefined"&&JSON.parse){return JSON.parse(_b);}var _c=_b.split(":sjs-k:");return _c;};storage.saveKeyMap=function(){var _d=this.stringifyArray(this.keys);widget.setPreferenceForKey(_d,"sjs-keymap");};storage.loadKeyMap=function(){var _e=widget.preferenceForKey("sjs-keymap");var _f=_e.length&&_e.length>0?this.parseString(_e):[];this.keys=_f;};storage.loadKeyMap();storage.clear=function(){for(var i=0,m=this.keys.length;i<m;i++){widget.setPreferenceForKey(null,this.keys[i]);}this.keys=[];this.saveKeyMap();};storage.getAll=function(){var all=[];for(var i=0,m=this.keys.length;i<m;i++){all.push({key:this.keys[i],value:this.get(this.keys[i])});}return all;};storage.getAllKeys=function(){return this.keys;};